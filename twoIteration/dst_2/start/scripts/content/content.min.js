(function(b){try{function C(){var D=parseInt(localStorage.getItem("curTabActive"))||0;$("#tabs").tabs({active:D,activate:function(){0===D?localStorage.setItem("curTabActive",0):1==D?localStorage.setItem("curTabActive",1):2==D&&localStorage.setItem("curTabActive",2)}})}var j=!1;$(document).ready(function(){function D(){$(".nav_menu").css("max-height",document.body.clientHeight-80+"px")}C(),D(),b.addEventListener("resize",D),"yes"==localStorage.getItem("shuffle_background")?($("#shuffle_background").prop("checked",!0),$("#shuffle_favorites").prop("checked",!1)):$("#shuffle_background").prop("checked",!1),$("#shuffle_background").off("change"),$("#shuffle_background").on("change",function(){$("#shuffle_background").is(":checked")?(localStorage.setItem("shuffle_background","yes"),$("#shuffle_favorites").prop("checked",!1),localStorage.setItem("shuffle_favorites","no")):localStorage.setItem("shuffle_background","no")}),"yes"==localStorage.getItem("shuffle_favorites")?($("#shuffle_favorites").prop("checked",!0),$("#shuffle_background").prop("checked",!1)):$("#shuffle_favorites").prop("checked",!1),$("#shuffle_favorites").off("change"),$("#shuffle_favorites").on("change",function(){$("#shuffle_favorites").is(":checked")?(localStorage.setItem("shuffle_favorites","yes"),$("#shuffle_background").prop("checked",!1),localStorage.setItem("shuffle_background","no")):localStorage.setItem("shuffle_favorites","no")}),b.loadGlobalOptions=function(){b.loadCountDownModule(b),b.loadAutoHideModule(b),b.loadSnowModule(b),"no"==localStorage.getItem("enable_most_visited")?$(".most_visited").hide():$(".most_visited").show(),$("#enable_most_visited").prop("checked","yes"===localStorage.getItem("enable_most_visited")),$("#enable_most_visited").off("change"),$("#enable_most_visited").on("change",function(){$("#enable_most_visited").is(":checked")?$(".most_visited").fadeIn():$(".most_visited").fadeOut(),localStorage.setItem("enable_most_visited",$("#enable_most_visited").is(":checked")?"yes":"no"),chrome.runtime.sendMessage({changeOptions:utils.getGlobalOpt()})}),"no"==localStorage.getItem("enable_apps")?$(".apps").fadeOut():$(".apps").fadeIn(),$("#enable_apps").prop("checked","yes"===localStorage.getItem("enable_apps")),$("#enable_apps").off("change"),$("#enable_apps").on("change",function(){$("#enable_apps").is(":checked")?$(".apps").fadeIn():$(".apps").fadeOut(),localStorage.setItem("enable_apps",$("#enable_apps").is(":checked")?"yes":"no"),chrome.runtime.sendMessage({changeOptions:utils.getGlobalOpt()})}),"no"==localStorage.getItem("enable_share")?$(".share").fadeOut():$(".share").fadeIn(),$("#enable_share").prop("checked","yes"===localStorage.getItem("enable_share")),$("#enable_share").off("change"),$("#enable_share").on("change",function(){$("#enable_share").is(":checked")?$(".share").fadeIn():$(".share").fadeOut(),localStorage.setItem("enable_share",$("#enable_share").is(":checked")?"yes":"no"),chrome.runtime.sendMessage({changeOptions:utils.getGlobalOpt()})}),"no"==localStorage.getItem("enable_slideshow")?B():A(),$("#enable_slideshow").prop("checked","yes"===localStorage.getItem("enable_slideshow")),$("#enable_slideshow").off("change"),$("#enable_slideshow").on("change",function(){if(!$("#enable_slideshow").is(":checked"))B();else{var E=[];localStorage.getItem("mark_favor")&&(E=JSON.parse(localStorage.getItem("mark_favor"))),"no"==localStorage.getItem("shuffle_background")&&("no"==localStorage.getItem("shuffle_favorites")||"yes"==localStorage.getItem("shuffle_favorites")&&1>=E.length)&&(localStorage.setItem("shuffle_background","yes"),localStorage.setItem("shuffle_favorites","no"),$("#shuffle_background").prop("checked",!0),$("#shuffle_favorites").prop("checked",!1)),A()}localStorage.setItem("enable_slideshow",$("#enable_slideshow").is(":checked")?"yes":"no"),chrome.runtime.sendMessage({changeOptions:utils.getGlobalOpt()})}),$("[data-toggle=\"tooltip\"]").tooltip()},b.loadGlobalOptions(),b.loadImagesInOption=function(){for(var E=0;E<user.bg_img_list;E++){var F="bg-"+("0"+E).slice(-2),I=$("<li>"),K,N;N=F+".jpg",K=$("<img>",{"data-src":N,src:utils.getExtURL(b.imageBuffer[E].fullPath)}),I.append(K),$("#images_selector").append(I);var O,Q=[];localStorage.getItem("mark_favor")&&(Q=JSON.parse(localStorage.getItem("mark_favor"))),O=-1<Q.indexOf(E+"")?$("<span class=\"mark_favor marked_favor\" favor-for=\""+E+"\" data-toggle=\"tooltip\" data-placement=\"bottom\" title=\"Remove this image from favorites\"><span class=\"glyphicon glyphicon-heart\"></span></span>"):$("<span class=\"mark_favor\" favor-for=\""+E+"\" data-toggle=\"tooltip\" data-placement=\"bottom\" title=\"Mark this image as favorite\"><span class=\"glyphicon glyphicon-heart-empty\"></span></span>"),utils.resetClickHnd(O,function(){var T=$(this).attr("favor-for"),V=[];localStorage.getItem("mark_favor")&&(V=JSON.parse(localStorage.getItem("mark_favor"))),$(this).toggleClass("marked_favor"),$(this).hasClass("marked_favor")?($(this).attr("data-toggle","tooltip"),$(this).attr("data-placement","bottom"),$(this).attr("data-original-title","Remove this image from favorites"),$(this).tooltip(),$(this).find(".glyphicon").removeClass("glyphicon-heart-empty"),$(this).find(".glyphicon").addClass("glyphicon-heart"),-1==V.indexOf(T+"")&&V.push(T+"")):($(this).attr("data-toggle","tooltip"),$(this).attr("data-placement","bottom"),$(this).attr("data-original-title","Mark this image as favorite"),$(this).tooltip(),$(this).find(".glyphicon").removeClass("glyphicon-heart"),$(this).find(".glyphicon").addClass("glyphicon-heart-empty"),-1<V.indexOf(T+"")&&V.splice(V.indexOf(T+""),1)),localStorage.setItem("mark_favor",JSON.stringify(V))}),$("#images_selector").append(O),5<E&&4==E%5&&$("#images_selector").append($("<br>"))}$("#images_selector li").each(function(){-1<($(this).find("img").attr("src")+"").indexOf(b.chosenRandomBG)&&$(this).addClass("selected")}),String.prototype.toShortNumber=function(){var T=this.toString(),V=+T;if(!V||V==NaN){var W=T.match(/\d+/g).toString();V=+W}var X;if(1e9<=V)X=(Math.round(V/1e7)/100).toString()+"B";else if(1e6<=V)X=(Math.round(V/1e4)/100).toString()+"M";else if(1e3<=V)X=(Math.round(V/10)/100).toString()+"K";else if(1e3>V)return V.toString();return X},$("#close_background_selector_widget").off("click"),$("#close_background_selector_widget").on("click",function(){$("#background_selector_widget").fadeOut()}),$("#background_selector_widget").off("click"),$("#background_selector_widget").on("click",function(T){T.stopPropagation()});$("#background_selector_widget #tab-background li").off("click"),$("#background_selector_widget #tab-background li").on("click",function(T){T.preventDefault(),T.stopPropagation();$(this).parent("ul");if($("#background_selector_widget li.selected").removeClass(),$(this).addClass("selected"),0<$(this).find("img").length){var W=$(this).find("img").attr("data-src");user.bg_img=W,user.bg_color="",b.setBackgroundGIFOrJPG(W)}else if($(this).attr("cl")){var X=$(this).attr("cl");$("body").css({"background-image":"none",background:"#"+X}),user.bg_img="none",user.bg_color="#"+X}}),$("[data-toggle=\"tooltip\"]").tooltip()},chrome.extension.sendMessage({rateStatus:!0},function(E){-1===E&&$("#click-Rate").hide(),0===E&&$("#click-Rate").show(),1===E&&($("#click-Rate").addClass(localStorage.getItem("highlight")||"highlight"),$("#click-Rate").show())}),utils.resetClickHnd($("#click-Rate"),function(){$("#click-Rate").attr("class",($("#click-Rate").attr("class")||"").replace(/highlight[a-z_-]*[ ]*/gi,"")),localStorage.setItem("rate_clicked","yes"),$("#click-Rate").hide(),localStorage.setItem("rate_clicked","cws"),chrome.extension.sendMessage("click-Rate")}),utils.resetClickHnd($(".lnk_privacy"),function(){chrome.extension.sendMessage("click-Privacy")}),utils.resetClickHnd($(".click-Fanpage"),function(){chrome.extension.sendMessage("click-Rate")}),utils.resetClickHnd($(".click-ShareFB"),function(){chrome.extension.sendMessage("click-ShareFB")}),utils.resetClickHnd($(".click-ShareGG"),function(){chrome.extension.sendMessage("click-ShareGG")}),utils.resetClickHnd($(".click-ShareTW"),function(){chrome.extension.sendMessage("click-ShareTW")}),utils.resetClickHnd($(".click-SharePI"),function(){chrome.extension.sendMessage("click-SharePI")}),utils.resetClickHnd($(".click-ShareTU"),function(){chrome.extension.sendMessage("click-ShareTU")}),utils.resetClickHnd($(".click-ShareVK"),function(){chrome.extension.sendMessage("click-ShareVK")}),utils.resetClickHnd($("#tool_menu a"),function(){"mail-address-shower"==$(this).attr("id")||chrome.extension.sendMessage({name:"click-Apps",data:$(this).text().replace(/[ ]*\([0-9]+\)[ ]*$/,"")})}),$("[data-toggle=\"tooltip\"]").tooltip()}),b.addEventListener("load",function(){$("#__bg").fadeIn(350,function(){$("#wrapper").fadeIn(100,function(){"yes"!==localStorage.getItem("theme_clicked")&&$("#background_selector_menu").addClass(localStorage.getItem("highlight")||"highlight");var D=function(){$("#background_selector_menu").attr("class",($("#background_selector_menu").attr("class")||"").replace(/highlight[a-z_-]*[ ]*/gi,"")),localStorage.setItem("theme_clicked","yes")};utils.resetClickHnd($("#background_selector_menu"),function(E){E.preventDefault(),E.stopPropagation(),$("#background_selector_widget").fadeIn(),chrome.extension.sendMessage("click-ChangeThemeMenu"),D(),j||(j=!0,b.loadImagesInOption())})})})});var r=null,z=10,A=function(){function D(){var E=new Date().getTime(),F=0;localStorage.getItem("last_time_do_slide")&&(F=parseInt(localStorage.getItem("last_time_do_slide"))),E-F>=1e3*z&&(localStorage.setItem("last_time_do_slide",E),b.imageBuffer&&b.setNewTabBackground())}$("#selectTimer").parent().fadeIn(),localStorage.getItem("slideshow_timer")&&(z=parseInt(localStorage.getItem("slideshow_timer")),$("#selectTimer select").val(z)),$("#selectTimer select").off("change"),$("#selectTimer select").on("change",function(){z=parseInt($(this).val()),localStorage.setItem("slideshow_timer",z)}),b.listAllThreads.threadSlideshow&&b.listAllThreads.threadSlideshow.pause(),b.listAllThreads.threadSlideshow={pause:function(){clearInterval(r)},resume:function(){D(),clearInterval(r),r=setInterval(D,999)}},b.listAllThreads.threadSlideshow.resume()},B=function(){$("#selectTimer").parent().fadeOut(),clearInterval(r),localStorage.removeItem("last_time_do_slide")}}catch(C){console.log(C)}})(this);(function(b){b.getAllImages=function(){chrome.runtime.getPackageDirectoryEntry(function(j){j.getDirectory("start/static/bg-images",{},function(r){var z=r.createReader(),A=[];getEntries=function(B){z.readEntries(function(C){if(C.length){for(var D in C)A.push(C[D]);getEntries(B)}else B(A)},function(){})},getEntries(function(B){b.imageBuffer=B.map(function(C){return{fullPath:C.fullPath.replace("/crxfs","")}}),def("bg_img_list",b.imageBuffer.length),b.setNewTabBackground()})})})},b.listAllThreads={},b.chosenRandomBG="",b.setBackgroundGIFOrJPG=function(j){var r=j.replace("bg-0","").replace("bg-","").replace(".jpg",""),z=b.imageBuffer[parseInt(r)].fullPath;localStorage.setItem("last_bg",z),document.getElementById("__bg").style.backgroundImage="url("+chrome.extension.getURL(z),document.getElementById("__bg").style.backgroundColor="none",document.getElementById("__bg").style.backgroundSize="cover",document.getElementById("frame_bg")&&document.getElementById("frame_bg").remove()},b.setNewTabBackground=function(){var j=""+localStorage.getItem("last_bg"),r=[],z=[];localStorage.getItem("mark_favor")&&(r=JSON.parse(localStorage.getItem("mark_favor")),2<=r.length&&-1<r.indexOf(j)&&r.splice(r.indexOf(j),1),r.length&&(z=r.join("|").split("|")));for(var A=1;A<=user.bg_img_list;A++)""+A!=j&&z.push(""+A);if("yes"==localStorage.getItem("shuffle_background")||"yes"==localStorage.getItem("shuffle_favorites")&&0==r.length){var B;B="0"==j?1:z[Math.floor(Math.random()*z.length)],chosenRandomBG="bg-"+("0"+B).slice(-2)+".jpg"}else if("yes"==localStorage.getItem("shuffle_favorites")){var B=r[Math.floor(Math.random()*r.length)];chosenRandomBG="bg-"+("0"+B).slice(-2)+".jpg"}else chosenRandomBG="bg-"+("0"+j).slice(-2)+".jpg";b.setBackgroundGIFOrJPG(chosenRandomBG)},b.getAllImages()})(this);window.loadCountDownModule=function(b){b.countDownThread&&clearTimeout(b.countDownThread),b.countDownThread=null;var j=$("#enable_countdown"),r=$("#countdown_setPosition"),z=$("#countdown_setText"),A=$("#countdown_setTime"),B=function(){function C(){var T=new Date().getTime();if(T>E)N=0,O=0,Q=0,S=0;else{var V=(T-E)/1e3,W=60;V=Math.abs(Math.floor(V)),N=Math.floor(V/(24*W*W)),S=V-24*N*W*W,O=Math.floor(S/(W*W)),S-=O*W*W,Q=Math.floor(S/W),S-=Q*W}}function D(){clearTimeout(b.countDownThread),C(),$("#days .number").text(10>N?("0"+N).slice(-2):N),$("#hours .number").text(("0"+O).slice(-2)),$("#minutes .number").text(("0"+Q).slice(-2)),$("#seconds .number").text(("0"+S).slice(-2)),"yes"==localStorage.getItem("enable_countdown")&&(b.countDownThread=setTimeout(D,999))}r.val(localStorage.getItem("countdownPosition")),$(".countDown").removeClass("miniSize"),$(".countDown").removeClass("center_center"),localStorage.getItem("countdownPosition")&&("bottom center"==localStorage.getItem("countdownPosition").toLowerCase()?$(".countDown").removeClass("miniSize"):"center"==localStorage.getItem("countdownPosition").toLowerCase()?($(".countDown").removeClass("miniSize"),$(".countDown").addClass("center_center")):$(".countDown").addClass("miniSize")),K.parent().parent().fadeIn(),I.parent().parent().fadeIn(),r.parent().parent().fadeIn(),$("#countdown").fadeIn(),r.off("change"),r.on("change",function(){localStorage.setItem("countdownPosition",$(this).val());var T=$(this).val().toLowerCase();"bottom center"===T?($(".countDown").removeClass("miniSize"),$(".countDown").removeClass("center_center")):"center"===T?($(".countDown").removeClass("miniSize"),$(".countDown").addClass("center_center")):($(".countDown").addClass("miniSize"),$(".countDown").removeClass("center_center")),chrome.runtime.sendMessage({changeOptions:utils.getGlobalOpt()})});var E=0,F="";localStorage.getItem("countdownToTime")&&(I.val(localStorage.getItem("countdownToTime")),E=new Date(localStorage.getItem("countdownToTime")).getTime()),localStorage.getItem("countdownText")&&(K.val(localStorage.getItem("countdownText")),F="Countdown to "+localStorage.getItem("countdownText"),$("#countdownTitle").text(F));var I=function(T){("blur"==T.handleObj.type||T.keyCode==getKeyCode("ENTER"))&&(""==$(this).val()?($(this).attr("type","text"),$(this).val("Invalid time"),I.off("focus"),I.on("focus",function(){$(this).attr("type","datetime-local")})):(E=new Date($(this).val()).getTime(),localStorage.setItem("countdownToTime",$(this).val()),chrome.runtime.sendMessage({changeOptions:utils.getGlobalOpt()})),T.keyCode==getKeyCode("ENTER")&&$(this).trigger("blur"))},K=function(T){("blur"==T.handleObj.type||T.keyCode==getKeyCode("ENTER"))&&(F=0<$(this).val().length?"Countdown to "+$(this).val():"",$("#countdownTitle").text(F),localStorage.setItem("countdownText",$(this).val()),chrome.runtime.sendMessage({changeOptions:utils.getGlobalOpt()}),T.keyCode==getKeyCode("ENTER")&&$(this).trigger("blur"))};I.off("blur"),I.on("blur",I),I.off("keydown"),I.on("keydown",I),K.off("blur"),K.on("blur",K),K.off("keydown"),K.on("keydown",K);var N,O,Q,S;b.countDownThread=setTimeout(D,1),b.listAllThreads.threadCountdown={pause:function(){clearInterval(b.countDownThread)},resume:function(){D()}}};"yes"==localStorage.getItem("enable_countdown")?(j.prop("checked",!0),B()):(j.prop("checked",!1),r.parent().parent().hide(),A.parent().parent().hide(),z.parent().parent().hide(),$("#countdown").hide()),j.off("change"),j.on("change",function(){$(this).is(":checked")?(localStorage.setItem("enable_countdown","yes"),B()):(localStorage.setItem("enable_countdown","no"),z.parent().parent().fadeOut(),A.parent().parent().fadeOut(),r.parent().parent().fadeOut(),$("#countdown").fadeOut(),clearTimeout(b.countDownThread)),chrome.runtime.sendMessage({changeOptions:utils.getGlobalOpt()})})};const KEY_CODES={ENTER:13,UP_ARROW:38,DOWN_ARROW:40,F5:116};function getKeyCode(b){let j=KEY_CODES[b];return j?j:KEY_CODES[ENTER]}(function(b){"use strict";function j(B,C){var D=B;for(var E in C){var F=C[E],I=new RegExp("\\{"+E+"\\}","gi");D=D.replace(I,F)}return D}function r(){var B=document.querySelector("#search-input").value;if(""!=B&&null!=B){$("#search-suggestion-pad").remove();var C,D=utils.locale;if(D=D.replace("_","-"),0<B.trim().length||null==z.SearchForm){var E=z.SearchUrl;C=j(E,{searchTerms:encodeURIComponent(B),lang:D})}else C=z.SearchForm;utils.count("c.snt"),utils.mark_time("act.snt"),trackStatusEvent("search-"+z.ShortName,null,B,function(){try{var F=[];localStorage.getItem("se_txt")&&(F=(""+localStorage.getItem("se_txt")).split("|")),0>F.indexOf(B)&&(50<=F.length&&F.shift(),F.push(B),localStorage.setItem("se_txt",F.join("|")))}catch(I){b.debug&&console.log(I)}b.top.location.href=C})}}var z=null;SEARCH_ENGINES[localStorage.sengine]||delete localStorage.sengine,localStorage.sengine==void 0?setTimeout(function(){trackStatusEvent("newtab")},3e3):setTimeout(function(){trackStatusEvent("newtab")},1e3);var A="web";user.selected_cat=A,$(document).ready(function(){function B(){function ha(ja){for(var ka=0;ka<ia.length;ka++)if(ia[ka]===ja||"Google "+ia[ka]===ja)return!0;return!1}$("#tool_menu").html(`\n        <div><a id="tool_myaccount"  href="https://myaccount.google.com/"><i class="icon_myaccount"></i>My Account</a><div class="closebtn" hide-app="https://myaccount.google.com/"></div></div>\n        <div><a id="tool_gmail"      href="https://mail.google.com/mail/"><i class="icon_gmail"></i>Gmail</a><div class="closebtn" hide-app="https://mail.google.com/mail/"></div></div>\n        <div><a id="tool_youtube"    href="https://www.youtube.com/"><i class="icon_youtube"></i>Youtube</a><div class="closebtn" hide-app="https://www.youtube.com/"></div></div>\n        <div><a id="tool_drive"      href="https://drive.google.com/"><i class="icon_drive"></i>Drive</a><div class="closebtn" hide-app="https://drive.google.com/"></div></div>\n        <div><a id="tool_documents"  href="https://docs.google.com/document/"><i class="icon_documents"></i>Docs</a><div class="closebtn" hide-app="https://docs.google.com/document/"></div></div>\n        <div><a id="tool_contacts"   href="https://contacts.google.com/"><i class="icon_contacts"></i>Contacts</a><div class="closebtn" hide-app="https://contacts.google.com/"></div></div>\n        <div><a id="tool_calendar"   href="https://calendar.google.com/"><i class="icon_calendar"></i>Calendar</a><div class="closebtn" hide-app="https://calendar.google.com/"></div></div>\n        <div><a id="tool_photos"     href="https://photos.google.com/"><i class="icon_photos"></i>Photos</a><div class="closebtn" hide-app="https://photos.google.com/"></div></div>\n        <div><a id="tool_news"       href="https://news.google.com/"><i class="icon_news"></i>News</a><div class="closebtn" hide-app="https://news.google.com/"></div></div>\n        <div><a id="tool_googleplus" href="https://plus.google.com/"><i class="icon_googleplus"></i>Google+</a><div class="closebtn" hide-app="https://plus.google.com/"></div></div>\n        <div><a id="tool_hangouts"   href="https://hangouts.google.com/"><i class="icon_hangouts"></i>Hangouts</a><div class="closebtn" hide-app="https://hangouts.google.com/"></div></div>\n        <div><a id="tool_googlemap"  href="https://maps.google.com/"><i class="icon_googlemap"></i>Google Maps</a><div class="closebtn" hide-app="https://maps.google.com/"></div></div>\n        <div><a id="tool_classroom"  href="https://classroom.google.com/"><i class="icon_classroom"></i>Google Classroom</a><div class="closebtn" hide-app="https://classroom.google.com/"></div></div>\n        <hr>\n        <div><a id="tool_facebook"   href="https://www.facebook.com/"><i class="icon_facebook"></i>Facebook</a><div class="closebtn" hide-app="https://www.facebook.com/"></div></div>\n        `);var ia=["Gmail","YouTube","Drive","Docs","Contacts","Photos","Calendar","Google+","Hangouts","Google Maps","Google Classroom","Google Search"];chrome.management.getAll(function(ja){for(var ma,ka=ja.filter(function(sa){return"undefined"!=typeof sa.appLaunchUrl}),la=0;la<ka.length;la++)if(ma=ka[la],!ha(ma.name)){var na=document.createElement("DIV"),oa=document.createElement("A"),pa=document.createElement("I"),qa=document.createTextNode(ma.name),ra=document.createElement("DIV");ra.className="closebtn",ra.setAttribute("hide-app","app:"+pa.id),pa.setAttribute("style","background-image:url('"+ma.icons[0].url+"');background-size:cover;"),oa.setAttribute("id",pa.id),oa.addEventListener("click",function(){chrome.management.launchApp(this.id)}),oa.appendChild(pa),oa.appendChild(qa),na.appendChild(oa),na.appendChild(ra),document.getElementById("tool_menu").appendChild(na),localStorage.getItem("hideApp")&&0<JSON.parse(localStorage.getItem("hideApp")).length&&F("tool_menu","Apps")}localStorage.getItem("hideApp")&&(aa=JSON.parse(localStorage.getItem("hideApp")),aa.forEach(sa=>{$(`#tool_menu a[href='${sa}']`).parent().hide()})),D()})}function C(){chrome.runtime.sendMessage({topSites:!0},function(ha){for(var ia=0,ja=0;ja<ha.length;ja++)if(0<=Z.indexOf(ha[ja].url))continue;else if(0!=ja&&$("#topsites_menu").append($("<hr>")),$("#topsites_menu").append($("<div><a href=\""+(b.vl?user.firstRunLandingPage:ha[ja].url)+"\"><i style=\"background-image:url('https://www.google.com/s2/favicons?domain="+encodeURIComponent(ha[ja].url)+"');background-size:cover;\"></i>"+ha[ja].title+"</a><div class=\"closebtn\" close-for=\""+ha[ja].url+"\"></div></div>")),ia++,10<=ia)break;utils.resetClickHnd($("#topsites_menu a"),function(){chrome.extension.sendMessage("click-TopSites")}),localStorage.getItem("hideLink")&&0<JSON.parse(localStorage.getItem("hideLink")).length&&F("topsites_menu","Links"),D()})}function D(){utils.resetClickHnd($(".closebtn"),function(){$(this).attr("close-for")?(Z.push($(this).attr("close-for")),localStorage.setItem("hideLink",JSON.stringify(Z)),C(),$("#msg").text("Link removed"),E("mostVisited")):$(this).attr("hide-app")&&(aa.push($(this).attr("hide-app")),$(this).parent().remove(),localStorage.setItem("hideApp",JSON.stringify(aa)),$("#msg").text("App removed"),E("apps"))})}function E(ha){I(),localStorage.getItem("hideApp")&&0<JSON.parse(localStorage.getItem("hideApp")).length&&F("tool_menu","Apps"),localStorage.getItem("hideLink")&&0<JSON.parse(localStorage.getItem("hideLink")).length&&F("topsites_menu","Links"),$(".undo-box").removeClass("undo-box-hide"),utils.resetClickHnd($("#undobtn"),function(){"mostVisited"===ha?(Z.pop(),localStorage.setItem("hideLink",JSON.stringify(Z)),$("#topsites_menu").empty(),C()):"apps"==ha&&(aa.pop(),localStorage.setItem("hideApp",JSON.stringify(aa)),$("#tool_menu").empty(),0>aa.toString().indexOf("mail.google.com")&&chrome.runtime.sendMessage(chrome.runtime.id,{type:"fetch_email_data"}),B()),$(".undo-box").addClass("undo-box-hide")}),$("#close-undo-box-btn").off("click"),$("#close-undo-box-btn").click(function(){$(".undo-box").addClass("undo-box-hide"),$("#undobtn").off("click")}),ba&&$(".undo-box").hover(function(){clearTimeout(ba)},function(){I()})}function F(ha,ia){let ja=$("<div>",{class:ha+"_restore"});0>=$(`.${ha}_restore`).size()&&(ja.html(`<a class="${ha+"_restoreBtn"}" restore-for = "${ha}"><i class="restoreBtn"></i>Restore ${ia}</a>`),$(`#${ha}`).append("<hr>").append(ja),$(`.${ha+"_restoreBtn"}`).click(function(){$(`#${$(this).attr("restore-for")}`).empty(),"tool_menu"===$(this).attr("restore-for")?(localStorage.removeItem("hideApp"),0>aa.toString().indexOf("mail.google.com")&&chrome.runtime.sendMessage(chrome.runtime.id,{type:"fetch_email_data"}),B()):"topsites_menu"===$(this).attr("restore-for")&&(localStorage.removeItem("hideLink"),Z=[],C())}))}function I(ha){ba&&(clearTimeout(ba),ba=null),ba=setTimeout(function(){$(".undo-box").addClass("undo-box-hide"),$("#undobtn").off("click")},7e3),ha&&clearTimeout(ba)}function K(){user.time_format="12h"==user.time_format?"24h":"12h",N()}function N(){var ha=new Date;if("12h"==user.time_format){var ia=12>ha.getHours()?"AM":"PM";$(".ampm").html(ia),$(".ampm").css("display","inline-block");var ja=ha.getHours();0==ja?ja=12:12<ja&&(ja-=12),$(".hour").html(ja+":"+("0"+ha.getMinutes()).slice(-2))}else $(".hour").html(("0"+ha.getHours()).slice(-2)+":"+("0"+ha.getMinutes()).slice(-2)),$(".ampm").css("display","none");$(".day").html(Y[ha.getDay()]),$(".num").html(user.date_format.replace("{{m}}",ha.getMonth()+1).replace("{{d}}",ha.getDate()).replace("{{y}}",ha.getFullYear()))}function O(){var ha}function Q(ha){return ha.replace(/(?:^|\s)\w/g,function(ia){return ia.toUpperCase()})}function W(ha){(function(ja){var ka=document.getElementById("mail-address-shower");ka?ka.innerHTML=ja:function(){var ma=document.createElement("DIV"),na=document.createElement("A"),oa=document.createTextNode(ja);na.setAttribute("id","mail-address-shower"),na.appendChild(oa),ma.appendChild(na),document.getElementById("tool_menu").insertBefore(ma,document.getElementById("tool_menu").firstChild)}()})(ha.mailAddress),function(ja){var ka=document.getElementById("mail-counter");ka?ka.innerHTML="("+ja+")":function(){var ma=document.createElement("SPAN"),na=document.createTextNode("("+ja+")");ma.setAttribute("style","margin-left:5px;"),ma.setAttribute("id","mail-counter"),ma.appendChild(na),document.getElementById("tool_gmail").appendChild(ma)}()}(ha.mailNums)}B();var X=$("#search-input"),Y=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],Z=[];localStorage.getItem("hideLink")&&(Z=JSON.parse(localStorage.getItem("hideLink")));var aa=[];localStorage.getItem("hideApp")&&(aa=JSON.parse(localStorage.getItem("hideApp"))),C();var ba=null,ca=200,da=function(){$("#topsites_menu").fadeOut(ca),$("#share_menu").fadeOut(ca),$("#support_menu").fadeOut(ca),$("#tool_menu").fadeOut(ca)};$("nav").off("mouseleave"),$("nav").on("mouseleave",da),$("footer").off("mouseleave"),$("footer").on("mouseleave",da),$("#topsites_menu").hide(),utils.resetMouseEnterHnd($("#lnk_topsites"),function(ha){ha.stopPropagation(),$("#topsites_menu").show(ca),$("#share_menu").fadeOut(ca),$("#support_menu").fadeOut(ca),$("#tool_menu").fadeOut(ca)}),utils.resetClickHnd($("#lnk_topsites"),function(ha){ha.stopPropagation(),$("#topsites_menu").toggle(ca),$("#share_menu").fadeOut(ca),$("#support_menu").fadeOut(ca),$("#tool_menu").fadeOut(ca)}),utils.resetMouseEnterHnd($("#topsites_menu"),function(ha){ha.stopPropagation(),$("#topsites_menu").off("mouseleave"),$("#topsites_menu").on("mouseleave",da)}),utils.resetClickHnd($("#topsites_menu"),function(ha){ha.stopPropagation()}),$("#share_menu").hide(),utils.resetMouseEnterHnd($("#lnk_share"),function(ha){ha.stopPropagation(),$("#topsites_menu").fadeOut(ca),$("#share_menu").show(ca),$("#support_menu").fadeOut(ca),$("#tool_menu").fadeOut(ca)}),utils.resetClickHnd($("#lnk_share"),function(ha){ha.stopPropagation(),$("#topsites_menu").fadeOut(ca),$("#share_menu").toggle(ca),$("#support_menu").fadeOut(ca),$("#tool_menu").fadeOut(ca)}),utils.resetMouseEnterHnd($("#share_menu"),function(ha){ha.stopPropagation(),$("#share_menu").off("mouseleave"),$("#share_menu").on("mouseleave",da)}),utils.resetClickHnd($("#share_menu"),function(ha){ha.stopPropagation(),da()}),$("#support_menu").hide(),utils.resetMouseEnterHnd($("#lnk_support"),function(ha){ha.stopPropagation(),$("#topsites_menu").fadeOut(ca),$("#share_menu").fadeOut(ca),$("#support_menu").show(ca),$("#tool_menu").fadeOut(ca)}),utils.resetClickHnd($("#lnk_support"),function(ha){ha.stopPropagation(),$("#topsites_menu").fadeOut(ca),$("#share_menu").fadeOut(ca),$("#support_menu").toggle(ca),$("#tool_menu").fadeOut(ca)}),utils.resetMouseEnterHnd($("#support_menu"),function(ha){ha.stopPropagation(),$("#support_menu").off("mouseleave"),$("#support_menu").on("mouseleave",da)}),utils.resetClickHnd($("#support_menu"),function(ha){ha.stopPropagation(),da()}),$("#tool_menu").hide(),utils.resetMouseEnterHnd($("#lnk_tool"),function(ha){ha.stopPropagation(),$("#topsites_menu").fadeOut(ca),$("#share_menu").fadeOut(ca),$("#support_menu").fadeOut(ca),$("#tool_menu").show(ca)}),utils.resetClickHnd($("#lnk_tool"),function(ha){ha.stopPropagation(),$("#topsites_menu").fadeOut(ca),$("#share_menu").fadeOut(ca),$("#support_menu").fadeOut(ca),$("#tool_menu").toggle(ca)}),utils.resetMouseEnterHnd($("#tool_menu"),function(ha){ha.stopPropagation(),$("#tool_menu").off("mouseleave"),$("#tool_menu").on("mouseleave",da)}),utils.resetClickHnd($("#tool_menu"),function(ha){ha.stopPropagation()}),utils.resetClickHnd($(document),function(){da(),$("#search-suggestion-pad").hide(),1==$("#background_selector_widget").css("opacity")&&$("#background_selector_widget").fadeOut()}),K(),$(".widght .time").on("click",function(){K()});var ea=setInterval(N,1e4);b.listAllThreads.threadSearchForm&&b.listAllThreads.threadSearchForm.pause(),b.listAllThreads.threadSearchForm={pause:function(){clearInterval(ea)},resume:function(){N(),clearInterval(ea),ea=setInterval(N,1e4)}};var fa=SEARCH_ENGINES;$("#search-button").click(O),X.keyup(function(ha){$("#search-suggestion-pad").css({direction:X.css("direction")}),(ha.keyCode==getKeyCode("ENTER")||getKeyCode("ENTER"))&&O()}),$("#search-input").focus(),$("#search-engine-select").css("display","inline-block"),$("#search-input").addClass("custom");var ga=localStorage.sengine||SEARCH_ENGINES_DEFAULT;"undefined"!=typeof ga&&function(ha){var ia=SEARCH_ENGINES[ha];z=ia,ia.Logo?$("#search-engine-item-title").html("<img src=\""+ia.Logo+"\"/>"):"palikan"!=ha||localStorage.dotdotdot?$("#search-engine-item-title").html(Q(ha)):$("#search-engine-item-title").html("...");try{null!=b.autoSuggest&&b.autoSuggest.setSuggestUrl(ia.SuggestUrl)}catch(ja){}$("#search-input").attr("placeholder","Search "+ia.ShortName)}(ga),$(this).click(function(){$("#search-engine-list").empty().hide(),$("#search-engine-select").removeClass("active")}),$("#search-engine-select").click(function(){var ha=$("#search-engine-list");if(0<ha.children().length)return $("#search-engine-list").empty(),void $(this).removeClass("active");for(var ia in SEARCH_ENGINES_ORDER){var ja=SEARCH_ENGINES_ORDER[ia];user.sengine==ja?"palikan"==ja&&!localStorage.dotdotdot&&G(ja):G(ja)}return $("#search-engine-list").show(),$(this).addClass("active"),!1}),function(){var ha=!1;$("#search-button").click(function(){ha||(ha=!0,r(),setTimeout(function(){ha=!1},1e3))}),$("#search-input").keyup(function(ia){(ia.keyCode==getKeyCode("ENTER")||ia.which==getKeyCode("ENTER"))&&r.call(this)})}(),function(){var ha=document.getElementById("search-input"),ia=z.SuggestUrl;b.autoSuggest=new AutoSuggest(ha,ia,r)}(),chrome.runtime.sendMessage(chrome.runtime.id,{type:"fetch_email_data"}),chrome.runtime.onMessage.addListener(function(ha,ia){if(b.debug&&(b.debug&&console.log("request: ",ha),b.debug&&console.log("sender: ",ia)),ha.refreshOptions&&b.loadGlobalOptions(),"gmail_info_fetched"===ha.type&&W(ha.info),ha.pauseAllThreads)for(var la,ja=Object.keys(b.listAllThreads),ka=0;ka<ja.length;ka++)la=b.listAllThreads[ja[ka]],la&&"function"==typeof la.pause&&la.pause();if(ha.resumeAllThreads)for(var la,ja=Object.keys(b.listAllThreads),ka=0;ka<ja.length;ka++)la=b.listAllThreads[ja[ka]],la&&"function"==typeof la.resume&&la.resume()})})})(this);window.AutoSuggest=function(b,j,r){"use strict";var z=this,A=null,B="",C=j;z.asDiv=null;var D=-1,E=0;z.action=r,z.init=function(){b.addEventListener("keydown",z.keyDown,!1),b.addEventListener("keyup",z.keyUp,!1)},z.setSuggestUrl=function(F){C=F},z.sprintf=function(F,I){var K=F;for(var N in I){var O=I[N],Q=new RegExp("\\{"+N+"\\}","gi");K=K.replace(Q,O)}return K},z.getData=function(F){if(!F)return void(null!=z.asDiv&&(z.asDiv.style.display="none"));if(void 0!==C&&""!==C){var I,K=I=utils.locale,K=K.replace("_","-"),N=z.sprintf(C,{searchTerms:F,lang:K,country:""});{var O;O=new XMLHttpRequest,O.open("GET",N,!0),O.onreadystatechange=function(){if(4==O.readyState&&200==O.status){var Q;if(B==F){null==z.asDiv&&(z.asDiv=document.getElementById("search-suggestion-pad")),z.asDiv.innerHTML=null;var Q=O.response;Q="function"==typeof SEARCH_ENGINES[user.sengine].SuggestParser?SEARCH_ENGINES[user.sengine].SuggestParser(Q):JSON.parse(Q);var S=Q[1];E=S.length;for(var T=0;T<E&&5>T;T++){var V=S[T],W=document.createElement("li"),X=V.indexOf(F);-1==X?W.textContent=V:W.innerHTML=V.substr(0,X+F.length)+"<b>"+V.substr(X+F.length)+"</b>",W.setAttribute("id","auto-suggest-row"+T),W.index=T,W.isRow=!0,W.addEventListener("mouseover",function(Y){var Z=Y.currentTarget;-1!=D&&document.getElementById("auto-suggest-row"+D).setAttribute("class",""),Z.setAttribute("class","selected"),D=Z.index},!1),W.addEventListener("click",function(Y){var Z=Y.currentTarget;b.value=Z.textContent,z.onSearch(Z.textContent),Y.preventDefault()},!1),z.asDiv.appendChild(W)}D=-1,z.asDiv.style.display=0==E?"none":"block"}}},O.send("")}}},z.keyUp=function(F){var I=F.keyCode;I!=getKeyCode("ENTER")&&I!=getKeyCode("UP_ARROW")&&I!=getKeyCode("DOWN_ARROW")&&I!=getKeyCode("F5")&&(null!=A&&(window.clearInterval(A),A=null),B=b.value,A=setTimeout(z.getData,10,b.value))},z.keyDown=function(F){F.keyCode},z.documentMouseDown=function(F){if(F.explicitOriginalTarget!=z.asDiv&&(B="--",null!=z.asDiv)){z.asDiv.style.display="none";try{document.getElementById("container").style.height="3px"}catch(I){console.log(I)}}},z.setASdivPosition=function(){for(var F=b,I=0,K=b.offsetHeight-1;F.offsetParent&&"body"!=F.tagName.toLowerCase();)I+=F.offsetLeft,K+=F.offsetTop,F=F.offsetParent;I+=F.offsetLeft,K+=F.offsetTop,null!=z.asDiv&&(z.asDiv.style.left=I+"px",z.asDiv.style.top=K+"px")},z.onSearch=function(){B="--",null!=z.asDiv&&(z.asDiv.style.display="none",document.getElementById("container")&&(document.getElementById("container").style.height="29px"),z.action())},z.changeSuggestUrl=function(F){C=F},z.init()};window.loadAutoHideModule=function(b){function j(){$("#wrapper").fadeIn(1e3),r()}function r(){clearTimeout(b.autoHideThread),b.autoHideThread=setTimeout(a,1e4)}function z(){"none"==$("#background_selector_widget").css("display")&&$("#wrapper").fadeOut(1e3)}function A(){clearTimeout(b.autoHideThread),$("body").off("mousemove",j),$("input[type=text]").off("focus",A),$("input[type=search]").off("keypress",A),$("input[type=text], input[type=search]").off("focusout",B)}function B(){b.listAllThreads.threadAutoHide={pause:function(){clearTimeout(b.autoHideThread),z()},resume:function(){j()}},r(),$("body").off("mousemove",j),$("input[type=text]").off("focus",A),$("input[type=search]").off("keypress",A),$("input[type=text], input[type=search]").off("focusout",B),$("body").on("mousemove",j),$("input[type=text]").on("focus",A),$("input[type=search]").on("keypress",A),$("input[type=text], input[type=search]").on("focusout",B)}b.autoHideThread&&clearTimeout(b.autoHideThread),b.autoHideThread=null,"yes"==localStorage.getItem("enable_autohide")?B():A(),$("#enable_autohide").prop("checked","yes"===localStorage.getItem("enable_autohide")),$("#enable_autohide").off("change"),$("#enable_autohide").on("change",function(){localStorage.setItem("enable_autohide",$("#enable_autohide").is(":checked")?"yes":"no"),$("#enable_autohide").is(":checked")?B():A(),chrome.runtime.sendMessage({changeOptions:utils.getGlobalOpt()})})},window.loadSnowModule=function(b){b.change_interval&&clearInterval(b.change_interval),b.change_interval=null;var j=function(){var z,A=$("<div id=\"flake\" class=\"snow\" />").css({position:"absolute","z-index":999999999,top:"-50px",cursor:"default","user-select":"none"}).html("&#10052;"),B=function(){var C=$(document).height(),D=$(document).width(),E=Math.random()*D-100,F=0.5+Math.random(),I=z.minSize+Math.random()*z.maxSize,N=E-250+200*Math.random(),O=10*C+5e3*Math.random();A.clone().appendTo("body").html(z.snow_type).css({left:E,opacity:F,"font-size":I,color:z.flakeColor}).animate({top:C-40,left:N,opacity:0.3},O,"linear",function(){$(this).remove()})};switch(localStorage.getItem("snow_type")||localStorage.setItem("snow_type","flake"),localStorage.getItem("snow_type")){case"flake":z={minSize:10,maxSize:25,newOn:500,flakeColor:"#0099FF",snow_type:"&#10052;"};break;case"ball":z={minSize:5,maxSize:20,newOn:500,flakeColor:"#bbb",snow_type:"&#x2022;"};}b.listAllThreads.threadSnow&&b.listAllThreads.threadSnow.pause(),b.listAllThreads.threadSnow={pause:function(){$(".snow").pause(),clearInterval(b.change_interval)},resume:function(){$(".snow").resume(),clearInterval(b.change_interval),b.change_interval=setInterval(B,z.newOn)}},b.listAllThreads.threadSnow.resume()},r=function(){$(".snow").resume(),clearInterval(b.change_interval)};"yes"==localStorage.getItem("enable_snow")?(j(),$("#snow_type").parent().parent().parent().show()):(r(),$("#snow_type").parent().parent().parent().hide()),$("#enable_snow").prop("checked","yes"===localStorage.getItem("enable_snow")),$("#enable_snow").off("change").on("change",function(){localStorage.setItem("enable_snow",$("#enable_snow").is(":checked")?"yes":"no"),$("#enable_snow").is(":checked")?(j(),$("#snow_type").parent().parent().parent().fadeIn()):(r(),$("#snow_type").parent().parent().parent().fadeOut()),chrome.runtime.sendMessage({changeOptions:utils.getGlobalOpt()})}),localStorage.getItem("snow_type")&&$("#snow_type").val(localStorage.getItem("snow_type")),$("#snow_type").off("change").on("change",function(){localStorage.setItem("snow_type",$(this).val()),r(),j()})};